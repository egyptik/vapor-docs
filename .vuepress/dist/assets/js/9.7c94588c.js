(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{168:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),a("p"),t._m(1),a("p"),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),a("p",[t._v("On subsequent deployments, only the assets that have changed will be uploaded to S3, while unchanged assets will be copied over from the previous deployment.")]),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._m(28),t._v(" "),t._m(29),t._v(" "),t._m(30),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),a("p",[t._v("In order to authenticate with Vapor from your CI platform, you will need to add a "),a("code",[t._v("VAPOR_API_TOKEN")]),t._v(" environment variable to your CI build environment. You may generate an API token in your "),a("a",{attrs:{href:"https://vapor.laravel.com/app/account/api-tokens",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vapor API settings dashboard"),a("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),t._m(36)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"deployments"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deployments","aria-hidden":"true"}},[this._v("#")]),this._v(" Deployments")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#introduction"}},[t._v("Introduction")])]),a("li",[a("a",{attrs:{href:"#initiating-deployments"}},[t._v("Initiating Deployments")])]),a("li",[a("a",{attrs:{href:"#build-hooks"}},[t._v("Build Hooks")])]),a("li",[a("a",{attrs:{href:"#deploy-hooks"}},[t._v("Deploy Hooks")])]),a("li",[a("a",{attrs:{href:"#assets"}},[t._v("Assets")]),a("ul",[a("li",[a("a",{attrs:{href:"#code-splitting-dynamic-imports"}},[t._v("Code Splitting / Dynamic Imports")])]),a("li",[a("a",{attrs:{href:"#urls-within-css"}},[t._v("URLs Within CSS")])])])]),a("li",[a("a",{attrs:{href:"#redeploying"}},[t._v("Redeploying")])]),a("li",[a("a",{attrs:{href:"#rollbacks"}},[t._v("Rollbacks")])]),a("li",[a("a",{attrs:{href:"#deploying-from-ci"}},[t._v("Deploying From CI")]),a("ul",[a("li",[a("a",{attrs:{href:"#git-commit-information"}},[t._v("Git Commit Information")])])])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"introduction"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#introduction","aria-hidden":"true"}},[this._v("#")]),this._v(" Introduction")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Of course, one of the primary features of Laravel Vapor is atomic, zero-downtime deployments. Unlike many other features of Vapor, deployments are "),s("strong",[this._v("only initiated via the Vapor CLI")]),this._v(". During deployment, Vapor will run the "),s("code",[this._v("build")]),this._v(" steps of your "),s("code",[this._v("vapor.yml")]),this._v(" file on the local machine that the deployment is running on. This might be your personal machine or a continuous integration platform.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"initiating-deployments"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#initiating-deployments","aria-hidden":"true"}},[this._v("#")]),this._v(" Initiating Deployments")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("To initiate a deployment, execute the "),s("code",[this._v("deploy")]),this._v(" CLI command from the root of your application:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("vapor deploy production\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"build-hooks"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#build-hooks","aria-hidden":"true"}},[this._v("#")]),this._v(" Build Hooks")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("You may define build hooks for an environment using the "),a("code",[t._v("build")]),t._v(" key within your "),a("code",[t._v("vapor.yml")]),t._v(" file. These commands are executed on the local machine that the deployment is running on and may be used to prepare your application for deployment. During deployment, your application is built within a temporary "),a("code",[t._v(".vapor")]),t._v(" directory that is created by the CLI and all of your "),a("code",[t._v("build")]),t._v(" commands will run within that temporary directory:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[t._v("id")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("3")]),t._v("\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("environments")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token key atrule"}},[t._v("production")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("memory")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1024")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("database")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("cache")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("cache\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("build")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'php artisan event:cache'")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("deploy")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'php artisan migrate --force'")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"deploy-hooks"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deploy-hooks","aria-hidden":"true"}},[this._v("#")]),this._v(" Deploy Hooks")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("You may define deployment hooks for an environment using the "),s("code",[this._v("deploy")]),this._v(" key within your "),s("code",[this._v("vapor.yml")]),this._v(" file. These commands are executed against the deployed environment "),s("strong",[this._v("before it is activated for general availability")]),this._v(". If any of these commands fail, the deployment will not be activated. You may review the output / logs from your deployment hooks via the Vapor UI's deployment detail screen:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[t._v("id")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("3")]),t._v("\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("environments")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token key atrule"}},[t._v("production")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("memory")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1024")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("database")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("cache")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("cache\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("build")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'php artisan event:cache'")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("deploy")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'php artisan migrate --force'")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"assets"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#assets","aria-hidden":"true"}},[this._v("#")]),this._v(" Assets")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("During deployment, Vapor will automatically extract all of the assets in your Laravel project's "),s("code",[this._v("public")]),this._v(" directory and upload them to S3. In addition, Vapor will create a AWS CloudFront (CDN) distribution to distribute these assets efficiently around the world.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Because all of your assets will be served via S3 / CloudFront, you should always generate URLs to these assets using Laravel's "),s("code",[this._v("asset")]),this._v(" helper. Vapor injects an "),s("code",[this._v("ASSET_URL")]),this._v(" environment variable which Laravel's "),s("code",[this._v("asset")]),this._v(" helper will use when constructing your URLs:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token operator"}},[this._v("<")]),this._v("img src"),s("span",{attrs:{class:"token operator"}},[this._v("=")]),s("span",{attrs:{class:"token double-quoted-string string"}},[this._v("\"{{ asset('img.jpg') }}\"")]),s("span",{attrs:{class:"token operator"}},[this._v(">")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"code-splitting-dynamic-imports"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#code-splitting-dynamic-imports","aria-hidden":"true"}},[this._v("#")]),this._v(" Code Splitting / Dynamic Imports")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("If you are taking advantage of dynamic imports and code splitting in your project, you will need to let Webpack know where the child chunks will be loaded from for each deployment. To accomplish this, you can take advantage of the "),s("code",[this._v("ASSET_URL")]),this._v(" variable that Laravel Vapor injects into your environment during your build step:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mix "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"laravel-mix"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("/*\n |--------------------------------------------------------------------------\n | Mix Asset Management\n |--------------------------------------------------------------------------\n |\n | Mix provides a clean, fluent API for defining some Webpack build steps\n | for your Laravel application. By default, we are compiling the Sass\n | file for the application as well as bundling up all the JS files.\n |\n */")]),t._v("\n\nmix\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("js")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"resources/js/app.js"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"public/js"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("sass")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"resources/sass/app.scss"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"public/css"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mix"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("inProduction")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("ASSET_URL")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" process"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token constant"}},[t._v("ASSET_URL")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"/"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    mix"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("webpackConfig")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("webpack "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            plugins"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("webpack"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DefinePlugin")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{attrs:{class:"token string"}},[t._v('"process.env.ASSET_PATH"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("stringify")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token constant"}},[t._v("ASSET_URL")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            output"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                publicPath"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("ASSET_URL")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"hot-module-replacement"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hot-module-replacement","aria-hidden":"true"}},[this._v("#")]),this._v(" Hot Module Replacement")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v('If you are using code splitting and "hot module replacement" during local development, you will need to use the '),s("code",[this._v("mix")]),this._v(" helper locally and the "),s("code",[this._v("asset")]),this._v(" helper when deploying to Vapor:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[t._v(" @"),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token function"}},[t._v("app")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token function"}},[t._v("environment")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'local'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("link href"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token double-quoted-string string"}},[t._v("\"{{ mix('css/admin/app.css') }}\"")]),t._v(" rel"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token double-quoted-string string"}},[t._v('"stylesheet"')]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("script src"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token double-quoted-string string"}},[t._v("\"{{ mix('js/admin/app.js') }}\"")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token operator"}},[t._v("<")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n@"),a("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("link href"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token double-quoted-string string"}},[t._v("\"{{ asset('css/admin/app.css') }}\"")]),t._v(" rel"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token double-quoted-string string"}},[t._v('"stylesheet"')]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("script src"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token double-quoted-string string"}},[t._v("\"{{ asset('js/admin/app.js') }}\"")]),t._v(" defer"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token operator"}},[t._v("<")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n@"),a("span",{attrs:{class:"token keyword"}},[t._v("endif")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"urls-within-css"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#urls-within-css","aria-hidden":"true"}},[this._v("#")]),this._v(" URLs Within CSS")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("Sometimes, your CSS may need to reference asset URLs, such as a "),a("code",[t._v("background-image")]),t._v(" property that references an image via URL. Obviously, you are not able to use the PHP "),a("code",[t._v("asset")]),t._v(" helper within your CSS. For this reason, Vapor will automatically prepend the correct asset base URL to all relative URLs in your CSS during the build process. After your build steps have executed, Vapor performs this action against any CSS files in your application's "),a("code",[t._v("public")]),t._v(" directory (including directories nested under "),a("code",[t._v("public")]),t._v(").")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"redeploying"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redeploying","aria-hidden":"true"}},[this._v("#")]),this._v(" Redeploying")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Sometimes you may need to simply redeploy a given environment without rebuilding it. For example, you may wish to do this after updating an environment variable. To accomplish this, you may use the Vapor UI or the "),s("code",[this._v("redeploy")]),this._v(" CLI command:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("vapor redeploy production\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"rollbacks"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rollbacks","aria-hidden":"true"}},[this._v("#")]),this._v(" Rollbacks")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v('To rollback to a previous deployment, you may select the deployment in the Vapor UI and click the "Rollback To" button, or you may use the '),s("code",[this._v("rollback")]),this._v(" CLI command. The "),s("code",[this._v("rollback")]),this._v(' command\'s "--select" option will allow you to select which deployment to rollback to from a list of recent deployments. If the '),s("code",[this._v("rollback")]),this._v(" command is executed without this option, it will simply rollback to the most previous successful deployment:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("vapor rollback production\n\nvapor rollback production --select\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("Variables, Secrets, & Rollbacks")]),this._v(" "),s("p",[this._v("When rolling back to a previous deployment, Vapor will use the environment's variables and secrets as they existed at the time the deployment you're rolling back to was originally deployed.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"deploying-from-ci"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deploying-from-ci","aria-hidden":"true"}},[this._v("#")]),this._v(" Deploying From CI")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("So far, we have discussed deploying Vapor projects from your local command line. However, you may also deploy them from a CI platform of your choice. Since the Vapor CLI client is part of your Composer dependencies, you may simply execute the "),s("code",[this._v("vapor deploy")]),this._v(" command in your CI platform's deployment pipeline.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"git-commit-information"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#git-commit-information","aria-hidden":"true"}},[this._v("#")]),this._v(" Git Commit Information")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Some CI platforms expose the Git commit information as environment variables during your build. You may pass this information to the "),s("code",[this._v("vapor deploy")]),this._v(" command. For example, if using CodeShip:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v('vapor deploy production --commit="${CI_COMMIT_ID}" --message="${CI_MESSAGE}"\n')])])])}],!1,null,null,null);n.options.__file="deployments.md";s.default=n.exports}}]);