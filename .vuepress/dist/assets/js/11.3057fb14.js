(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{179:function(t,e,a){"use strict";a.r(e);var s=a(0),n=Object(s.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),a("p"),t._m(1),a("p"),t._v(" "),t._m(2),t._v(" "),a("p",[t._v("As you may have noticed, projects do not contain much information or resources themselves. All of your deployments and invoked commands are stored within environments. Each project may have as many environments as needed.")]),t._v(" "),a("p",[t._v('Typically, you will have an environment for "production", and a "staging" environment for testing your application. However, don\'t be afraid to create more environments for testing new features without interrupting your main staging environment.')]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._m(6),t._v(" "),t._m(7),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._m(13),t._v(" "),t._m(14),t._m(15),t._v(" "),a("p",[t._v("Vapor automatically injects a variety of environment variables based on your environment's configured database, cache, etc. You will not see these environment variables when you manage your environment, and any variables you manually define will override Vapor's automatically injected variables.")]),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),a("p",[t._v("The following environment variables are reserved and may not be added to your environment:")]),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._m(27),t._v(" "),a("p",[t._v('Each environment is assigned a unique "vanity URL" which you may use to access the application immediately after it is deployed. When serving these URLs, Vapor automatically adds "no-index" headers to the response so they are not indexed by search engines.')]),t._v(" "),a("p",[t._v("In addition, these secret URLs will continue to work even when an application is in maintenance mode, allowing you to test your application before disabling maintenance mode and restoring general access.")]),t._v(" "),t._m(28),t._v(" "),a("p",[t._v("Of course, as cool as they are, you don't want to share your vanity URL with the world. You likely want to attach your own custom domain to an environment. To do so, you'll first need to create a "),a("router-link",{attrs:{to:"./../domains/certificates.html"}},[t._v("certificate")]),t._v(" for the domain. All Vapor applications are required to utilize SSL. Don't worry, Vapor's certificates are free and automatically renew.")],1),t._v(" "),t._m(29),t._v(" "),t._m(30),a("p",[t._v("During deployment, Vapor will configure the environment to handle requests on this domain. After the deployment is completed, Vapor will provide you with CNAME records for the domain. These records will point the domain to your Lambda application.")]),t._v(" "),a("p",[a("strong",[t._v("Of course, Vapor will automatically add these records to a "),a("router-link",{attrs:{to:"./../domains/dns.html"}},[t._v("Vapor DNS zone")]),t._v(" for you. So, if you are using Vapor to manage your DNS records, you are not required to manually add these CNAME records to your DNS configuration.")],1),t._v(" If you are not using Vapor to manage your DNS, you should manually add these CNAME records to your domain's DNS provider.")]),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),a("p",[t._v("You may attach a domain that supports wildcard subdomains to a Vapor environment if that environment is also using an "),a("router-link",{attrs:{to:"./../resources/networks.html#load-balancers"}},[t._v("application load balancer")]),t._v(" and you have a valid certificate for the domain. To attach a wildcard domain to your environment, specify a "),a("code",[t._v("*")]),t._v(" as the subdomain:")],1),t._v(" "),t._m(33),t._m(34),t._v(" "),a("p",[t._v("When deploying a Laravel application using a traditional VPS like those managed by "),a("a",{attrs:{href:"https://forge.laravel.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("Laravel Forge"),a("OutboundLink")],1),t._v(", you may have used the "),a("code",[t._v("php artisan down")]),t._v(' command to place your application in "maintenance mode". To place a Vapor environment in maintenance mode, you may use the Vapor UI or the '),a("code",[t._v("down")]),t._v(" CLI command:")]),t._v(" "),t._m(35),t._m(36),t._v(" "),t._m(37),t._m(38),t._v(" "),t._m(39),t._v(" "),t._m(40),t._v(" "),t._m(41),t._v(" "),t._m(42),t._v(" "),t._m(43),t._m(44),t._v(" "),t._m(45),t._v(" "),a("p",[t._v("While maximum performance is certainly appealing, in some situations it may make sense to set this value to the maximum concurrency you reasonably expect for your particular application. Otherwise, a DDoS attack against your application could result in larger than expected AWS costs:")]),t._v(" "),t._m(46),t._m(47),t._v(" "),a("p",[t._v('By default, when an environment is deployed, the first request it receives may encounter "cold starts". These requests typically incur a penalty of a few seconds while AWS loads a serverless container to serve the request. Once a request has been served by that container, it is typically kept warm to serve further requests with no delay.')]),t._v(" "),t._m(48),t._v(" "),t._m(49),a("p",[t._v("For more information on this feature and its pricing, please consult the "),a("a",{attrs:{href:"https://aws.amazon.com/blogs/aws/new-provisioned-concurrency-for-lambda-functions/",target:"_blank",rel:"noopener noreferrer"}},[t._v("AWS documentation"),a("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(50),t._v(" "),t._m(51),t._v(" "),a("p",[t._v('By default, when an environment is deployed, the first request it receives may encounter "cold starts". These requests typically incur a penalty of a few seconds while AWS loads a serverless container to serve the request. Once a request has been served by that container, it is typically kept warm to serve further requests with no delay.')]),t._v(" "),t._m(52),t._v(" "),t._m(53),t._m(54),t._v(" "),t._m(55),t._v(" "),t._m(56),t._m(57),t._v(" "),a("p",[t._v("Vapor automatically configures Laravel's task scheduler and instructs it to use the DynamoDB cache driver to avoid overlapping tasks, so no other configuration is required to begin leveraging Laravel's scheduled task feature.")]),t._v(" "),t._m(58),t._v(" "),t._m(59),t._m(60),t._v(" "),t._m(61),t._v(" "),t._m(62),t._m(63),t._v(" "),a("p",[t._v("You may configure alarms for all environment metrics using the Vapor UI. These alarms will notify you via the notification method of your choice when an alarm's configured threshold is broken and when an alarm recovers.")]),t._v(" "),t._m(64),t._v(" "),t._m(65),t._v(" "),t._m(66),t._m(67),t._v(" "),t._m(68),t._v(" "),t._m(69)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"environments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#environments","aria-hidden":"true"}},[this._v("#")]),this._v(" Environments")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#introduction"}},[t._v("Introduction")])]),a("li",[a("a",{attrs:{href:"#creating-environments"}},[t._v("Creating Environments")])]),a("li",[a("a",{attrs:{href:"#environment-variables"}},[t._v("Environment Variables")]),a("ul",[a("li",[a("a",{attrs:{href:"#updating-environment-variables"}},[t._v("Updating Environment Variables")])]),a("li",[a("a",{attrs:{href:"#vapor-environment-variables"}},[t._v("Vapor Environment Variables")])]),a("li",[a("a",{attrs:{href:"#reserved-environment-variables"}},[t._v("Reserved Environment Variables")])])])]),a("li",[a("a",{attrs:{href:"#secrets"}},[t._v("Secrets")]),a("ul",[a("li",[a("a",{attrs:{href:"#passport-keys"}},[t._v("Passport Keys")])])])]),a("li",[a("a",{attrs:{href:"#vanity-urls"}},[t._v("Vanity URLs")])]),a("li",[a("a",{attrs:{href:"#custom-domains"}},[t._v("Custom Domains")]),a("ul",[a("li",[a("a",{attrs:{href:"#wildcard-subdomains"}},[t._v("Wildcard Subdomains")])])])]),a("li",[a("a",{attrs:{href:"#maintenance-mode"}},[t._v("Maintenance Mode")]),a("ul",[a("li",[a("a",{attrs:{href:"#customizing-the-maintenance-mode-screen"}},[t._v("Customizing The Maintenance Mode Screen")])])])]),a("li",[a("a",{attrs:{href:"#commands"}},[t._v("Commands")])]),a("li",[a("a",{attrs:{href:"#concurrency"}},[t._v("Concurrency")])]),a("li",[a("a",{attrs:{href:"#provisioned-concurrency"}},[t._v("Provisioned Concurrency")])]),a("li",[a("a",{attrs:{href:"#prewarming"}},[t._v("Prewarming")])]),a("li",[a("a",{attrs:{href:"#timeout"}},[t._v("Timeout")])]),a("li",[a("a",{attrs:{href:"#scheduler"}},[t._v("Scheduler")])]),a("li",[a("a",{attrs:{href:"#metrics"}},[t._v("Metrics")]),a("ul",[a("li",[a("a",{attrs:{href:"#alarms"}},[t._v("Alarms")])])])]),a("li",[a("a",{attrs:{href:"#runtime"}},[t._v("Runtime")])]),a("li",[a("a",{attrs:{href:"#deleting-environments"}},[t._v("Deleting Environments")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"introduction"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#introduction","aria-hidden":"true"}},[this._v("#")]),this._v(" Introduction")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"creating-environments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#creating-environments","aria-hidden":"true"}},[this._v("#")]),this._v(" Creating Environments")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Environments may be created using the "),e("code",[this._v("env")]),this._v(" Vapor CLI command:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("vapor "),e("span",{attrs:{class:"token function"}},[this._v("env")]),this._v(" my-environment\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("This command will add a new environment entry to your project's "),e("code",[this._v("vapor.yml")]),this._v(" file that you may deploy when ready:")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[t._v("id")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("environments")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token key atrule"}},[t._v("production")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("build")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n    "),a("span",{attrs:{class:"token key atrule"}},[t._v("my-environment")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("build")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"environment-variables"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#environment-variables","aria-hidden":"true"}},[this._v("#")]),this._v(" Environment Variables")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Each environment contains a set of environment variables that provide crucial information to your application during execution, just like the variables present in your application's local "),e("code",[this._v(".env")]),this._v(" file.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"updating-environment-variables"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#updating-environment-variables","aria-hidden":"true"}},[this._v("#")]),this._v(" Updating Environment Variables")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("You may update an environment's variables via the Vapor UI or using the "),e("code",[this._v("env:pull")]),this._v(" and "),e("code",[this._v("env:push")]),this._v(" CLI commands. The "),e("code",[this._v("env:pull")]),this._v(" command may be used to pull down an environment file for a given environment:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("vapor env:pull production\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Once this command has been executed, a "),e("code",[this._v(".env.{environment}")]),this._v(" file will be placed in your application's root directory. To update the environment's variables, simply open and edit this file. When you are done editing the variables, use the "),e("code",[this._v("env:push")]),this._v(" command to push the variables back to Vapor:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("vapor env:push production\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"vapor-environment-variables"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vapor-environment-variables","aria-hidden":"true"}},[this._v("#")]),this._v(" Vapor Environment Variables")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Variables & Deployments")]),this._v(" "),e("p",[this._v("After updating an environment's variables, the new variables will not be utilized until the application is deployed again. In addition, when rolling back to a previous deployment, Vapor will use the variables as they existed at the time the deployment you're rolling back to was originally deployed.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Environment Variable Limits")]),this._v(" "),e("p",[this._v('Due to AWS Lambda limitations, your environment variables may only be 4kb in total. You should use "secrets" to store very large environment variables.')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"reserved-environment-variables"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reserved-environment-variables","aria-hidden":"true"}},[this._v("#")]),this._v(" Reserved Environment Variables")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[t._v("_HANDLER")]),t._v(" "),a("li",[t._v("AWS_ACCESS_KEY_ID")]),t._v(" "),a("li",[t._v("AWS_EXECUTION_ENV")]),t._v(" "),a("li",[t._v("AWS_LAMBDA_FUNCTION_MEMORY_SIZE")]),t._v(" "),a("li",[t._v("AWS_LAMBDA_FUNCTION_NAME")]),t._v(" "),a("li",[t._v("AWS_LAMBDA_FUNCTION_VERSION")]),t._v(" "),a("li",[t._v("AWS_LAMBDA_LOG_GROUP_NAME")]),t._v(" "),a("li",[t._v("AWS_LAMBDA_LOG_STREAM_NAME")]),t._v(" "),a("li",[t._v("AWS_LAMBDA_RUNTIME_API")]),t._v(" "),a("li",[t._v("AWS_REGION")]),t._v(" "),a("li",[t._v("AWS_SECRET_ACCESS_KEY")]),t._v(" "),a("li",[t._v("AWS_SESSION_TOKEN")]),t._v(" "),a("li",[t._v("LAMBDA_RUNTIME_DIR")]),t._v(" "),a("li",[t._v("LAMBDA_TASK_ROOT")]),t._v(" "),a("li",[t._v("TZ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"secrets"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#secrets","aria-hidden":"true"}},[this._v("#")]),this._v(" Secrets")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v('Due to AWS Lambda limitations, your environment variables may only be 4kb in total. However, "secrets" may be much larger, making them a perfect way to store large environment variables such as Laravel Passport keys. You may create secrets via the Vapor UI or the '),e("code",[this._v("secret")]),this._v(" CLI command:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("vapor secret production\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Secrets & Deployments")]),this._v(" "),e("p",[this._v("After updating an environment's secrets, the new secrets will not be utilized until the application is deployed again. In addition, when rolling back to a previous deployment, Vapor will use the secrets as they existed at the time the deployment you're rolling back to was originally deployed.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"passport-keys"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#passport-keys","aria-hidden":"true"}},[this._v("#")]),this._v(" Passport Keys")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Storing Laravel Passport keys is a common use-case for secrets. You may easily add your project's Passport keys as secrets using the "),e("code",[this._v("secret:passport")]),this._v(" CLI command:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("vapor secret:passport production\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"vanity-urls"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vanity-urls","aria-hidden":"true"}},[this._v("#")]),this._v(" Vanity URLs")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"custom-domains"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#custom-domains","aria-hidden":"true"}},[this._v("#")]),this._v(" Custom Domains")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("After creating a certificate, you may attach the domain to your environment using the "),e("code",[this._v("domain")]),this._v(" configuration option in your "),e("code",[this._v("vapor.yml")]),this._v(" file. When attaching a domain to an environment, it is not necessary to provide the "),e("code",[this._v("www")]),this._v(" sub-domain:")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[t._v("id")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("environments")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token key atrule"}},[t._v("production")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("domain")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" example.com\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("build")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Custom Domain Provisioning Time")]),this._v(" "),e("p",[this._v("Due to the nature of AWS CloudFront, custom domains often take 30-45 minutes to become fully active. So, do not worry if your custom domain is not immediately accessible after deployment.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"wildcard-subdomains"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#wildcard-subdomains","aria-hidden":"true"}},[this._v("#")]),this._v(" Wildcard Subdomains")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[t._v("id")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("environments")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token key atrule"}},[t._v("production")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("domain")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'*.example.com'")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("build")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"maintenance-mode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#maintenance-mode","aria-hidden":"true"}},[this._v("#")]),this._v(" Maintenance Mode")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("vapor down production\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("To remove an environment from maintenance mode, you may use the "),e("code",[this._v("up")]),this._v(" command:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("vapor up production\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Maintenance Mode & Vanity URLs")]),this._v(" "),e("p",[this._v('When an environment is in maintenance mode, the environment\'s custom domain will display a maintenance mode splash screen; however, you may still access the environment via its "vanity URL"')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"customizing-the-maintenance-mode-screen"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#customizing-the-maintenance-mode-screen","aria-hidden":"true"}},[this._v("#")]),this._v(" Customizing The Maintenance Mode Screen")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("You may customize the maintenance mode splash screen for your application by placing a "),e("code",[this._v("503.html")]),this._v(" file in your application's root directory.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"commands"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#commands","aria-hidden":"true"}},[this._v("#")]),this._v(" Commands")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Commands allow you to execute an arbitrary Artisan command against an environment. You may issue a command via the Vapor UI or using the "),e("code",[this._v("command")]),this._v(" CLI command. The "),e("code",[this._v("command")]),this._v(" command will prompt you for the Artisan command you would like to run:")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("vapor "),a("span",{attrs:{class:"token function"}},[t._v("command")]),t._v(" production\n\nvapor "),a("span",{attrs:{class:"token function"}},[t._v("command")]),t._v(" production --command"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"php artisan inspire"')]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"concurrency"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#concurrency","aria-hidden":"true"}},[this._v("#")]),this._v(" Concurrency")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("By default, Vapor will allow your application to process web requests at max concurrency, which is typically 1,000 requests executing at the same time at any given moment. If you would like to reduce the maximum web concurrency, you may define the "),e("code",[this._v("concurrency")]),this._v(" option in the environment's "),e("code",[this._v("vapor.yml")]),this._v(" configuration. Additionally, if you need more than 1,000 concurrent requests, you can submit a limit increase request in the AWS Support Center console.")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[t._v("id")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("environments")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token key atrule"}},[t._v("production")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("concurrency")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("50")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("build")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"provisioned-concurrency"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#provisioned-concurrency","aria-hidden":"true"}},[this._v("#")]),this._v(" Provisioned Concurrency")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v('To mitigate this issue, Amazon supports "provisioned concurrency". When using this feature, the requested number of execution environments / containers will be provisioned and kept "warm" for you automatically, allowing them to immediately serve any incoming requests. To enable this feature, you may add a '),e("code",[this._v("capacity")]),this._v(" configuration option to the environment in your "),e("code",[this._v("vapor.yml")]),this._v(" file:")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[t._v("id")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("environments")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token key atrule"}},[t._v("production")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("capacity")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("5")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("build")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Warming")]),this._v(" "),e("p",[this._v("When using this feature, any "),e("code",[this._v("warm")]),this._v(" values in your "),e("code",[this._v("vapor.yml")]),this._v(" file will be ignored.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"prewarming"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#prewarming","aria-hidden":"true"}},[this._v("#")]),this._v(" Prewarming")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v('To mitigate "cold starts" after a fresh deployment, Vapor allows you to define a '),a("code",[t._v("warm")]),t._v(" configuration value for an environment in your "),a("code",[t._v("vapor.yml")]),t._v(" file. The "),a("code",[t._v("warm")]),t._v(' value represents how many serverless containers Vapor will "pre-warm" by making concurrent requests to the newly deployed application '),a("strong",[t._v("before it is activated for public accessibility")]),t._v(". Vapor will continue to pre-warm this many containers every 10 minutes while the application is deployed so the specified number of containers are always ready to serve requests:")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[t._v("id")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("environments")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token key atrule"}},[t._v("production")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("warm")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("10")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("build")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"timeout"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#timeout","aria-hidden":"true"}},[this._v("#")]),this._v(" Timeout")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("By default, Vapor will limit web request execution time to 10 seconds. If you would like to change the timeout value, you may add a "),e("code",[this._v("timeout")]),this._v(" value (in seconds) to the environment's configuration. Note that AWS does not allow Lambda executions to process for more than 15 minutes:")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[t._v("id")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("environments")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token key atrule"}},[t._v("production")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("timeout")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("20")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("build")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"scheduler"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scheduler","aria-hidden":"true"}},[this._v("#")]),this._v(" Scheduler")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If you would like to disable the scheduler, you may set an environment's "),e("code",[this._v("scheduler")]),this._v(" option to "),e("code",[this._v("false")]),this._v(":")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[t._v("id")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("environments")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token key atrule"}},[t._v("production")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("scheduler")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("build")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"metrics"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#metrics","aria-hidden":"true"}},[this._v("#")]),this._v(" Metrics")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("A variety of environment performance metrics may be found in the Vapor UI or using the "),e("code",[this._v("metrics")]),this._v(" CLI command:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("vapor metrics production\nvapor metrics production 5m\nvapor metrics production 30m\nvapor metrics production 1h\nvapor metrics production 8h\nvapor metrics production 1d\nvapor metrics production 3d\nvapor metrics production 7d\nvapor metrics production 1M\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"alarms"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#alarms","aria-hidden":"true"}},[this._v("#")]),this._v(" Alarms")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"runtime"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#runtime","aria-hidden":"true"}},[this._v("#")]),this._v(" Runtime")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The "),e("code",[this._v("runtime")]),this._v(" configuration option allows you to specify which PHP version a given environment runs on. The currently supported runtimes are "),e("code",[this._v("php-7.3")]),this._v(" and "),e("code",[this._v("php-7.4")]),this._v(":")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[t._v("id")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vapor"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("laravel"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("app\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("environments")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token key atrule"}},[t._v("production")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("runtime")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" php"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{attrs:{class:"token number"}},[t._v("7.4")]),t._v("\n        "),a("span",{attrs:{class:"token key atrule"}},[t._v("build")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'composer install --no-dev'")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"deleting-environments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deleting-environments","aria-hidden":"true"}},[this._v("#")]),this._v(" Deleting Environments")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Environments may be deleted via the Vapor UI or using the "),e("code",[this._v("env:delete")]),this._v(" CLI command:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("vapor env:delete testing\n")])])])}],!1,null,null,null);n.options.__file="environments.md";e.default=n.exports}}]);